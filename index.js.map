{"version":3,"file":"index.js","sources":["../src/js/refs.js","../src/js/unsplash-api.js","../src/js/createGallary.js","../src/js/loader.js","../src/js/gallery.js"],"sourcesContent":["export const refs = {\n  list: document.querySelector('.js-gallery'),\n  form: document.querySelector('.js-search-form'),\n  loadMore: document.querySelector('.js-load-more'),\n  loader: document.querySelector('.loader'),\n};\n","import axios from 'axios';\n\nexport async function getPhotos(query, page) {\n  const BASE_URL = 'https://api.unsplash.com';\n  const END_POINT = '/search/photos';\n  const KEY = 'LxvKVGJqiSe6NcEVZOaLXC-f2JIIWZaq_o0WrF8mwJc';\n  const params = {\n    params: {\n      query,\n      page,\n      per_page: 12,\n      orientation: 'portrait',\n      client_id: KEY,\n    },\n  };\n  try {\n    const response = await axios.get(`${BASE_URL}${END_POINT}`, params);\n    return response.data;\n  } catch (error) {\n    console.log(error);\n  }\n}\n","export function createGallery(array) {\n  return array\n    .map(\n      img => `<li class=\"gallery__item\">\n                <img src=\"${img.urls.small}\" alt=\"${img.alt_description}\">\n            </li>`\n    )\n    .join('');\n}\n","import { refs } from './refs';\n\nexport function showLoader() {\n  refs.loader.classList.remove('is-hidden');\n}\n\nexport function hideLoader() {\n  refs.loader.classList.add('is-hidden');\n}\n","import { refs } from './refs';\nimport { getPhotos } from './unsplash-api';\nimport { createGallery } from './createGallary';\nimport { showLoader, hideLoader } from './loader';\n\nrefs.form.addEventListener('submit', onSubmit);\nrefs.loadMore.addEventListener('click', onclick);\nlet page = 1;\nlet searchQuery = null;\nasync function onSubmit(event) {\n  event.preventDefault();\n  refs.list.innerHTML = '';\n  showLoader();\n  page = 1;\n  searchQuery = event.currentTarget.elements.query.value.trim();\n  if (searchQuery === '') {\n    return alert('Запит пустий');\n  }\n  try {\n    const response = await getPhotos(searchQuery, page);\n    if (response.results.length === 0) {\n      return alert('Bad request');\n    }\n\n    refs.list.innerHTML = createGallery(response.results);\n    refs.loadMore.classList.remove('is-hidden');\n  } catch (error) {\n    console.log(error);\n  } finally {\n    hideLoader();\n    event.target.reset();\n  }\n}\n\nasync function onclick() {\n  page += 1;\n  showLoader();\n\n  try {\n    const response = await getPhotos(searchQuery, page);\n    const lastPage = Math.ceil(response.total / 12);\n    refs.list.insertAdjacentHTML('beforeend', createGallery(response.results));\n    if (lastPage === page) {\n      refs.loadMore.classList.add('is-hidden');\n      alert('the end');\n    }\n  } catch (error) {\n    console.log(error);\n  } finally {\n    hideLoader();\n  }\n}\n"],"names":["refs","getPhotos","query","page","BASE_URL","END_POINT","params","axios","error","createGallery","array","img","showLoader","hideLoader","onSubmit","onclick","searchQuery","event","response","lastPage"],"mappings":"svBAAO,MAAMA,EAAO,CAClB,KAAM,SAAS,cAAc,aAAa,EAC1C,KAAM,SAAS,cAAc,iBAAiB,EAC9C,SAAU,SAAS,cAAc,eAAe,EAChD,OAAQ,SAAS,cAAc,SAAS,CAC1C,ECHO,eAAeC,EAAUC,EAAOC,EAAM,CAC3C,MAAMC,EAAW,2BACXC,EAAY,iBAEZC,EAAS,CACb,OAAQ,CACN,MAAAJ,EACA,KAAAC,EACA,SAAU,GACV,YAAa,WACb,UAPQ,6CAQT,CACL,EACE,GAAI,CAEF,OADiB,MAAMI,EAAM,IAAI,GAAGH,CAAQ,GAAGC,CAAS,GAAIC,CAAM,GAClD,IACjB,OAAQE,EAAO,CACd,QAAQ,IAAIA,CAAK,CAClB,CACH,CCrBO,SAASC,EAAcC,EAAO,CACnC,OAAOA,EACJ,IACCC,GAAO;AAAA,4BACeA,EAAI,KAAK,KAAK,UAAUA,EAAI,eAAe;AAAA,kBAElE,EACA,KAAK,EAAE,CACZ,CCNO,SAASC,GAAa,CAC3BZ,EAAK,OAAO,UAAU,OAAO,WAAW,CAC1C,CAEO,SAASa,GAAa,CAC3Bb,EAAK,OAAO,UAAU,IAAI,WAAW,CACvC,CCHAA,EAAK,KAAK,iBAAiB,SAAUc,CAAQ,EAC7Cd,EAAK,SAAS,iBAAiB,QAASe,CAAO,EAC/C,IAAIZ,EAAO,EACPa,EAAc,KAClB,eAAeF,EAASG,EAAO,CAM7B,GALAA,EAAM,eAAc,EACpBjB,EAAK,KAAK,UAAY,GACtBY,IACAT,EAAO,EACPa,EAAcC,EAAM,cAAc,SAAS,MAAM,MAAM,OACnDD,IAAgB,GAClB,OAAO,MAAM,cAAc,EAE7B,GAAI,CACF,MAAME,EAAW,MAAMjB,EAAUe,EAAab,CAAI,EAClD,GAAIe,EAAS,QAAQ,SAAW,EAC9B,OAAO,MAAM,aAAa,EAG5BlB,EAAK,KAAK,UAAYS,EAAcS,EAAS,OAAO,EACpDlB,EAAK,SAAS,UAAU,OAAO,WAAW,CAC3C,OAAQQ,EAAO,CACd,QAAQ,IAAIA,CAAK,CACrB,QAAY,CACRK,IACAI,EAAM,OAAO,OACd,CACH,CAEA,eAAeF,GAAU,CACvBZ,GAAQ,EACRS,IAEA,GAAI,CACF,MAAMM,EAAW,MAAMjB,EAAUe,EAAab,CAAI,EAC5CgB,EAAW,KAAK,KAAKD,EAAS,MAAQ,EAAE,EAC9ClB,EAAK,KAAK,mBAAmB,YAAaS,EAAcS,EAAS,OAAO,CAAC,EACrEC,IAAahB,IACfH,EAAK,SAAS,UAAU,IAAI,WAAW,EACvC,MAAM,SAAS,EAElB,OAAQQ,EAAO,CACd,QAAQ,IAAIA,CAAK,CACrB,QAAY,CACRK,GACD,CACH"}