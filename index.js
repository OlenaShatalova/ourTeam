import{a as p}from"./assets/vendor-CR7N1gwd.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))a(e);new MutationObserver(e=>{for(const o of e)if(o.type==="childList")for(const n of o.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&a(n)}).observe(document,{childList:!0,subtree:!0});function c(e){const o={};return e.integrity&&(o.integrity=e.integrity),e.referrerPolicy&&(o.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?o.credentials="include":e.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function a(e){if(e.ep)return;e.ep=!0;const o=c(e);fetch(e.href,o)}})();const s={list:document.querySelector(".js-gallery"),form:document.querySelector(".js-search-form"),loadMore:document.querySelector(".js-load-more"),loader:document.querySelector(".loader")};async function d(r,t){const c="https://api.unsplash.com",a="/search/photos",o={params:{query:r,page:t,per_page:12,orientation:"portrait",client_id:"LxvKVGJqiSe6NcEVZOaLXC-f2JIIWZaq_o0WrF8mwJc"}};try{return(await p.get(`${c}${a}`,o)).data}catch(n){console.log(n)}}function u(r){return r.map(t=>`<li class="gallery__item">
                <img src="${t.urls.small}" alt="${t.alt_description}">
            </li>`).join("")}function f(){s.loader.classList.remove("is-hidden")}function m(){s.loader.classList.add("is-hidden")}s.form.addEventListener("submit",y);s.loadMore.addEventListener("click",h);let i=1,l=null;async function y(r){if(r.preventDefault(),s.list.innerHTML="",f(),i=1,l=r.currentTarget.elements.query.value.trim(),l==="")return alert("Запит пустий");try{const t=await d(l,i);if(t.results.length===0)return alert("Bad request");s.list.innerHTML=u(t.results),s.loadMore.classList.remove("is-hidden")}catch(t){console.log(t)}finally{m(),r.target.reset()}}async function h(){i+=1,f();try{const r=await d(l,i),t=Math.ceil(r.total/12);s.list.insertAdjacentHTML("beforeend",u(r.results)),t===i&&(s.loadMore.classList.add("is-hidden"),alert("the end"))}catch(r){console.log(r)}finally{m()}}
//# sourceMappingURL=index.js.map
